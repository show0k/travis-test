++++ realpath -s build
+++ dirname /home/theo/tmp/travis-test/src/build
++ BUILD_SCRIPT__PATH=/home/theo/tmp/travis-test/src
++ source /home/theo/tmp/travis-test/src/common.sh
+++ set -x
++++ realpath -s build
+++ dirname /home/theo/tmp/travis-test/src/build
++ OCTOPI_PATH=/home/theo/tmp/travis-test/src
++ pushd /home/theo/tmp/travis-test/src
~/tmp/travis-test/src ~/tmp/travis-test/src
+++ git rev-parse HEAD
++ export OCTOPI_COMMIT=62f0781ba082904fbe737a966aaa87abe2777bc0
++ OCTOPI_COMMIT=62f0781ba082904fbe737a966aaa87abe2777bc0
++ popd
~/tmp/travis-test/src
++ BUILD_VARIANT=default
++ BUILD_FLAVOR=default
++ WORKSPACE_POSTFIX=
++ '[' 0 -gt 0 ']'
++ '[' 0 -gt 1 ']'
++ '[' default '!=' default ']'
++ echo -e '--> Building VARIANT default, FLAVOR default'
--> Building VARIANT default, FLAVOR default
++ source /home/theo/tmp/travis-test/src/config
+++++ realpath -s /home/theo/tmp/travis-test/src/config
++++ dirname /home/theo/tmp/travis-test/src/config
+++ CONFIG_DIR=/home/theo/tmp/travis-test/src
+++ '[' -n '' ']'
+++ '[' -n '' ']'
+++ '[' -f /home/theo/tmp/travis-test/src/config.local ']'
+++ '[' -n '' ']'
+++ OCTOPI_SCRIPT_PATH=/home/theo/tmp/travis-test/src
+++ '[' -n '' ']'
+++ OCTOPI_IMAGE_PATH=/home/theo/tmp/travis-test/src/image
+++ '[' -n '' ']'
++++ head -n 1
++++ ls -t /home/theo/tmp/travis-test/src/image/2015-05-05-raspbian-wheezy.zip
+++ OCTOPI_ZIP_IMG=/home/theo/tmp/travis-test/src/image/2015-05-05-raspbian-wheezy.zip
+++ '[' -n '' ']'
+++ OCTOPI_WORKSPACE=/home/theo/tmp/travis-test/src/workspace
+++ '[' -n '' ']'
+++ OCTOPI_CHROOT_SCRIPT_PATH=/home/theo/tmp/travis-test/src/chroot_script
+++ '[' -n '' ']'
+++ OCTOPI_MOUNT_PATH=/home/theo/tmp/travis-test/src/workspace/mount
+++ '[' -n '' ']'
+++ OCTOPI_OVERRIDE_HOSTNAME=octopi
+++ '[' -n '' ']'
+++ OCTOPI_BUILD_REPO_MIRROR=
+++ '[' -n '' ']'
+++ OCTOPI_OCTOPRINT_REPO_SHIP=https://github.com/foosel/OctoPrint.git
+++ '[' -n '' ']'
+++ OCTOPI_OCTOPRINT_REPO_BUILD=
+++ '[' -n '' ']'
+++ OCTOPI_OCTOPRINT_REPO_BRANCH=master
+++ '[' -n '' ']'
+++ OCTOPI_INCLUDE_OCTOPRINT=yes
+++ '[' -n '' ']'
+++ OCTOPI_OCTOPIPANEL_REPO_SHIP=https://github.com/jonaslorander/OctoPiPanel.git
+++ '[' -n '' ']'
+++ OCTOPI_OCTOPIPANEL_REPO_BUILD=
+++ '[' -n '' ']'
+++ OCTOPI_OCTOPIPANEL_REPO_BRANCH=master
+++ '[' -n '' ']'
+++ OCTOPI_FBCP_REPO_SHIP=https://github.com/tasanakorn/rpi-fbcp
+++ '[' -n '' ']'
+++ OCTOPI_FBCP_REPO_BUILD=https://github.com/tasanakorn/rpi-fbcp
+++ '[' -n '' ']'
+++ OCTOPI_FBCP_REPO_BRANCH=
+++ '[' -n '' ']'
+++ OCTOPI_INCLUDE_OCTOPIPANEL=yes
+++ '[' -n '' ']'
+++ OCTOPI_CURAENGINE_VERSION=15.04
+++ '[' -n '' ']'
+++ OCTOPI_CURAENGINE_ARCHIVE=https://github.com/Ultimaker/CuraEngine/archive/15.04.zip
+++ '[' -n '' ']'
+++ OCTOPI_INCLUDE_CURAENGINE=yes
+++ '[' -n '' ']'
+++ OCTOPI_MJPGSTREAMER_REPO_SHIP=https://github.com/jacksonliam/mjpg-streamer.git
+++ '[' -n '' ']'
+++ OCTOPI_MJPGSTREAMER_REPO_BUILD=
+++ '[' -n '' ']'
+++ OCTOPI_MJPGSTREAMER_REPO_BRANCH=master
+++ '[' -n '' ']'
+++ OCTOPI_INCLUDE_MJPGSTREAMER=yes
+++ '[' -n '' ']'
+++ OCTOPI_HAPROXY_VERSION=1.5.8
+++ '[' -n '' ']'
+++ OCTOPI_HAPROXY_ARCHIVE=http://www.haproxy.org/download/1.5/src/haproxy-1.5.8.tar.gz
+++ '[' -n '' ']'
+++ OCTOPI_INCLUDE_HAPROXY=yes
+++ '[' -n '' ']'
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
++++ compgen -A variable
++++ grep '^OCTOPI_'
+++ vars='OCTOPI_BUILD_REPO_MIRROR
OCTOPI_CHROOT_SCRIPT_PATH
OCTOPI_COMMIT
OCTOPI_CURAENGINE_ARCHIVE
OCTOPI_CURAENGINE_VERSION
OCTOPI_FBCP_REPO_BRANCH
OCTOPI_FBCP_REPO_BUILD
OCTOPI_FBCP_REPO_SHIP
OCTOPI_HAPROXY_ARCHIVE
OCTOPI_HAPROXY_VERSION
OCTOPI_IMAGE_PATH
OCTOPI_INCLUDE_CURAENGINE
OCTOPI_INCLUDE_HAPROXY
OCTOPI_INCLUDE_MJPGSTREAMER
OCTOPI_INCLUDE_OCTOPIPANEL
OCTOPI_INCLUDE_OCTOPRINT
OCTOPI_MJPGSTREAMER_REPO_BRANCH
OCTOPI_MJPGSTREAMER_REPO_BUILD
OCTOPI_MJPGSTREAMER_REPO_SHIP
OCTOPI_MOUNT_PATH
OCTOPI_OCTOPIPANEL_REPO_BRANCH
OCTOPI_OCTOPIPANEL_REPO_BUILD
OCTOPI_OCTOPIPANEL_REPO_SHIP
OCTOPI_OCTOPRINT_REPO_BRANCH
OCTOPI_OCTOPRINT_REPO_BUILD
OCTOPI_OCTOPRINT_REPO_SHIP
OCTOPI_OVERRIDE_HOSTNAME
OCTOPI_PATH
OCTOPI_SCRIPT_PATH
OCTOPI_WORKSPACE
OCTOPI_ZIP_IMG'
+++ for var in '$vars'
+++ echo 'OCTOPI_BUILD_REPO_MIRROR = '
OCTOPI_BUILD_REPO_MIRROR = 
+++ eval export OCTOPI_BUILD_REPO_MIRROR
++++ export OCTOPI_BUILD_REPO_MIRROR
+++ for var in '$vars'
+++ echo 'OCTOPI_CHROOT_SCRIPT_PATH = /home/theo/tmp/travis-test/src/chroot_script'
OCTOPI_CHROOT_SCRIPT_PATH = /home/theo/tmp/travis-test/src/chroot_script
+++ eval export OCTOPI_CHROOT_SCRIPT_PATH
++++ export OCTOPI_CHROOT_SCRIPT_PATH
+++ for var in '$vars'
+++ echo 'OCTOPI_COMMIT = 62f0781ba082904fbe737a966aaa87abe2777bc0'
OCTOPI_COMMIT = 62f0781ba082904fbe737a966aaa87abe2777bc0
+++ eval export OCTOPI_COMMIT
++++ export OCTOPI_COMMIT
+++ for var in '$vars'
+++ echo 'OCTOPI_CURAENGINE_ARCHIVE = https://github.com/Ultimaker/CuraEngine/archive/15.04.zip'
OCTOPI_CURAENGINE_ARCHIVE = https://github.com/Ultimaker/CuraEngine/archive/15.04.zip
+++ eval export OCTOPI_CURAENGINE_ARCHIVE
++++ export OCTOPI_CURAENGINE_ARCHIVE
+++ for var in '$vars'
+++ echo 'OCTOPI_CURAENGINE_VERSION = 15.04'
OCTOPI_CURAENGINE_VERSION = 15.04
+++ eval export OCTOPI_CURAENGINE_VERSION
++++ export OCTOPI_CURAENGINE_VERSION
+++ for var in '$vars'
+++ echo 'OCTOPI_FBCP_REPO_BRANCH = '
OCTOPI_FBCP_REPO_BRANCH = 
+++ eval export OCTOPI_FBCP_REPO_BRANCH
++++ export OCTOPI_FBCP_REPO_BRANCH
+++ for var in '$vars'
+++ echo 'OCTOPI_FBCP_REPO_BUILD = https://github.com/tasanakorn/rpi-fbcp'
OCTOPI_FBCP_REPO_BUILD = https://github.com/tasanakorn/rpi-fbcp
+++ eval export OCTOPI_FBCP_REPO_BUILD
++++ export OCTOPI_FBCP_REPO_BUILD
+++ for var in '$vars'
+++ echo 'OCTOPI_FBCP_REPO_SHIP = https://github.com/tasanakorn/rpi-fbcp'
OCTOPI_FBCP_REPO_SHIP = https://github.com/tasanakorn/rpi-fbcp
+++ eval export OCTOPI_FBCP_REPO_SHIP
++++ export OCTOPI_FBCP_REPO_SHIP
+++ for var in '$vars'
+++ echo 'OCTOPI_HAPROXY_ARCHIVE = http://www.haproxy.org/download/1.5/src/haproxy-1.5.8.tar.gz'
OCTOPI_HAPROXY_ARCHIVE = http://www.haproxy.org/download/1.5/src/haproxy-1.5.8.tar.gz
+++ eval export OCTOPI_HAPROXY_ARCHIVE
++++ export OCTOPI_HAPROXY_ARCHIVE
+++ for var in '$vars'
+++ echo 'OCTOPI_HAPROXY_VERSION = 1.5.8'
OCTOPI_HAPROXY_VERSION = 1.5.8
+++ eval export OCTOPI_HAPROXY_VERSION
++++ export OCTOPI_HAPROXY_VERSION
+++ for var in '$vars'
+++ echo 'OCTOPI_IMAGE_PATH = /home/theo/tmp/travis-test/src/image'
OCTOPI_IMAGE_PATH = /home/theo/tmp/travis-test/src/image
+++ eval export OCTOPI_IMAGE_PATH
++++ export OCTOPI_IMAGE_PATH
+++ for var in '$vars'
+++ echo 'OCTOPI_INCLUDE_CURAENGINE = yes'
OCTOPI_INCLUDE_CURAENGINE = yes
+++ eval export OCTOPI_INCLUDE_CURAENGINE
++++ export OCTOPI_INCLUDE_CURAENGINE
+++ for var in '$vars'
+++ echo 'OCTOPI_INCLUDE_HAPROXY = yes'
OCTOPI_INCLUDE_HAPROXY = yes
+++ eval export OCTOPI_INCLUDE_HAPROXY
++++ export OCTOPI_INCLUDE_HAPROXY
+++ for var in '$vars'
+++ echo 'OCTOPI_INCLUDE_MJPGSTREAMER = yes'
OCTOPI_INCLUDE_MJPGSTREAMER = yes
+++ eval export OCTOPI_INCLUDE_MJPGSTREAMER
++++ export OCTOPI_INCLUDE_MJPGSTREAMER
+++ for var in '$vars'
+++ echo 'OCTOPI_INCLUDE_OCTOPIPANEL = yes'
OCTOPI_INCLUDE_OCTOPIPANEL = yes
+++ eval export OCTOPI_INCLUDE_OCTOPIPANEL
++++ export OCTOPI_INCLUDE_OCTOPIPANEL
+++ for var in '$vars'
+++ echo 'OCTOPI_INCLUDE_OCTOPRINT = yes'
OCTOPI_INCLUDE_OCTOPRINT = yes
+++ eval export OCTOPI_INCLUDE_OCTOPRINT
++++ export OCTOPI_INCLUDE_OCTOPRINT
+++ for var in '$vars'
+++ echo 'OCTOPI_MJPGSTREAMER_REPO_BRANCH = master'
OCTOPI_MJPGSTREAMER_REPO_BRANCH = master
+++ eval export OCTOPI_MJPGSTREAMER_REPO_BRANCH
++++ export OCTOPI_MJPGSTREAMER_REPO_BRANCH
+++ for var in '$vars'
+++ echo 'OCTOPI_MJPGSTREAMER_REPO_BUILD = '
OCTOPI_MJPGSTREAMER_REPO_BUILD = 
+++ eval export OCTOPI_MJPGSTREAMER_REPO_BUILD
++++ export OCTOPI_MJPGSTREAMER_REPO_BUILD
+++ for var in '$vars'
+++ echo 'OCTOPI_MJPGSTREAMER_REPO_SHIP = https://github.com/jacksonliam/mjpg-streamer.git'
OCTOPI_MJPGSTREAMER_REPO_SHIP = https://github.com/jacksonliam/mjpg-streamer.git
+++ eval export OCTOPI_MJPGSTREAMER_REPO_SHIP
++++ export OCTOPI_MJPGSTREAMER_REPO_SHIP
+++ for var in '$vars'
+++ echo 'OCTOPI_MOUNT_PATH = /home/theo/tmp/travis-test/src/workspace/mount'
OCTOPI_MOUNT_PATH = /home/theo/tmp/travis-test/src/workspace/mount
+++ eval export OCTOPI_MOUNT_PATH
++++ export OCTOPI_MOUNT_PATH
+++ for var in '$vars'
+++ echo 'OCTOPI_OCTOPIPANEL_REPO_BRANCH = master'
OCTOPI_OCTOPIPANEL_REPO_BRANCH = master
+++ eval export OCTOPI_OCTOPIPANEL_REPO_BRANCH
++++ export OCTOPI_OCTOPIPANEL_REPO_BRANCH
+++ for var in '$vars'
+++ echo 'OCTOPI_OCTOPIPANEL_REPO_BUILD = '
OCTOPI_OCTOPIPANEL_REPO_BUILD = 
+++ eval export OCTOPI_OCTOPIPANEL_REPO_BUILD
++++ export OCTOPI_OCTOPIPANEL_REPO_BUILD
+++ for var in '$vars'
+++ echo 'OCTOPI_OCTOPIPANEL_REPO_SHIP = https://github.com/jonaslorander/OctoPiPanel.git'
OCTOPI_OCTOPIPANEL_REPO_SHIP = https://github.com/jonaslorander/OctoPiPanel.git
+++ eval export OCTOPI_OCTOPIPANEL_REPO_SHIP
++++ export OCTOPI_OCTOPIPANEL_REPO_SHIP
+++ for var in '$vars'
+++ echo 'OCTOPI_OCTOPRINT_REPO_BRANCH = master'
OCTOPI_OCTOPRINT_REPO_BRANCH = master
+++ eval export OCTOPI_OCTOPRINT_REPO_BRANCH
++++ export OCTOPI_OCTOPRINT_REPO_BRANCH
+++ for var in '$vars'
+++ echo 'OCTOPI_OCTOPRINT_REPO_BUILD = '
OCTOPI_OCTOPRINT_REPO_BUILD = 
+++ eval export OCTOPI_OCTOPRINT_REPO_BUILD
++++ export OCTOPI_OCTOPRINT_REPO_BUILD
+++ for var in '$vars'
+++ echo 'OCTOPI_OCTOPRINT_REPO_SHIP = https://github.com/foosel/OctoPrint.git'
OCTOPI_OCTOPRINT_REPO_SHIP = https://github.com/foosel/OctoPrint.git
+++ eval export OCTOPI_OCTOPRINT_REPO_SHIP
++++ export OCTOPI_OCTOPRINT_REPO_SHIP
+++ for var in '$vars'
+++ echo 'OCTOPI_OVERRIDE_HOSTNAME = octopi'
OCTOPI_OVERRIDE_HOSTNAME = octopi
+++ eval export OCTOPI_OVERRIDE_HOSTNAME
++++ export OCTOPI_OVERRIDE_HOSTNAME
+++ for var in '$vars'
+++ echo 'OCTOPI_PATH = /home/theo/tmp/travis-test/src'
OCTOPI_PATH = /home/theo/tmp/travis-test/src
+++ eval export OCTOPI_PATH
++++ export OCTOPI_PATH
+++ for var in '$vars'
+++ echo 'OCTOPI_SCRIPT_PATH = /home/theo/tmp/travis-test/src'
OCTOPI_SCRIPT_PATH = /home/theo/tmp/travis-test/src
+++ eval export OCTOPI_SCRIPT_PATH
++++ export OCTOPI_SCRIPT_PATH
+++ for var in '$vars'
+++ echo 'OCTOPI_WORKSPACE = /home/theo/tmp/travis-test/src/workspace'
OCTOPI_WORKSPACE = /home/theo/tmp/travis-test/src/workspace
+++ eval export OCTOPI_WORKSPACE
++++ export OCTOPI_WORKSPACE
+++ for var in '$vars'
+++ echo 'OCTOPI_ZIP_IMG = /home/theo/tmp/travis-test/src/image/2015-05-05-raspbian-wheezy.zip'
OCTOPI_ZIP_IMG = /home/theo/tmp/travis-test/src/image/2015-05-05-raspbian-wheezy.zip
+++ eval export OCTOPI_ZIP_IMG
++++ export OCTOPI_ZIP_IMG
+++ echo ================================================================
================================================================
++ '[' '' == yes ']'
++ source /home/theo/tmp/travis-test/src/octopi
+++ source /home/theo/tmp/travis-test/src/common.sh
++++ set -x
+++ mkdir -p /home/theo/tmp/travis-test/src/workspace
+++ mkdir -p /home/theo/tmp/travis-test/src/workspace/mount
+++ install_fail_on_error_trap /home/theo/tmp/travis-test/src/workspace/mount
+++ set -e
+++ trap 'previous_command=$this_command; this_command=$BASH_COMMAND' DEBUG
++++ previous_command=
++++ this_command='trap '\''if [ $? -ne 0 ]; then echo -e "\nexit $? due to $previous_command \nBUILD FAILED!" && echo "unmounting image..." && ( unmount_image $OCTOPI_MOUNT_PATH || true ); fi;'\'' EXIT'
+++ trap 'if [ $? -ne 0 ]; then echo -e "\nexit $? due to $previous_command \nBUILD FAILED!" && echo "unmounting image..." && ( unmount_image $OCTOPI_MOUNT_PATH || true ); fi;' EXIT
++++ previous_command='trap '\''if [ $? -ne 0 ]; then echo -e "\nexit $? due to $previous_command \nBUILD FAILED!" && echo "unmounting image..." && ( unmount_image $OCTOPI_MOUNT_PATH || true ); fi;'\'' EXIT'
++++ this_command='unmount_image $OCTOPI_MOUNT_PATH'
+++ unmount_image /home/theo/tmp/travis-test/src/workspace/mount
+++ mount_path=/home/theo/tmp/travis-test/src/workspace/mount
+++ sudo umount /home/theo/tmp/travis-test/src/workspace/mount/boot
umount : /home/theo/tmp/travis-test/src/workspace/mount/boot : introuvable
+++ sudo umount /home/theo/tmp/travis-test/src/workspace/mount
umount : /home/theo/tmp/travis-test/src/workspace/mount : n'est pas monté
++++ previous_command='unmount_image $OCTOPI_MOUNT_PATH'
++++ this_command=true
+++ true
++++ previous_command=true
++++ this_command='pushd $OCTOPI_WORKSPACE'
+++ pushd /home/theo/tmp/travis-test/src/workspace
~/tmp/travis-test/src/workspace ~/tmp/travis-test/src
++++ previous_command='pushd $OCTOPI_WORKSPACE'
++++ this_command='[ -e *.img ]'
+++ '[' -e '*.img' ']'
++++ previous_command='[ -e *.img ]'
++++ this_command='OCTOPI_IMG_PATH=$PWD/Poppy_rpi.img'
+++ OCTOPI_IMG_PATH=/home/theo/tmp/travis-test/src/workspace/Poppy_rpi.img
++++ previous_command='OCTOPI_IMG_PATH=$PWD/Poppy_rpi.img'
++++ this_command='unzip -p $OCTOPI_ZIP_IMG'
++++ previous_command='unzip -p $OCTOPI_ZIP_IMG'
++++ this_command='pv > $OCTOPI_IMG_PATH'
+++ unzip -p /home/theo/tmp/travis-test/src/image/2015-05-05-raspbian-wheezy.zip
+++ pv
++++ previous_command='pv > $OCTOPI_IMG_PATH'
++++ this_command='mount_image $OCTOPI_IMG_PATH $OCTOPI_MOUNT_PATH'
+++ mount_image /home/theo/tmp/travis-test/src/workspace/Poppy_rpi.img /home/theo/tmp/travis-test/src/workspace/mount
+++ image_path=/home/theo/tmp/travis-test/src/workspace/Poppy_rpi.img
+++ mount_path=/home/theo/tmp/travis-test/src/workspace/mount
+++ sudo mount -o loop,offset=62914560 /home/theo/tmp/travis-test/src/workspace/Poppy_rpi.img /home/theo/tmp/travis-test/src/workspace/mount
+++ sudo mount -o loop,offset=4194304 /home/theo/tmp/travis-test/src/workspace/Poppy_rpi.img /home/theo/tmp/travis-test/src/workspace/mount/boot
++++ previous_command='mount_image $OCTOPI_IMG_PATH $OCTOPI_MOUNT_PATH'
++++ this_command='pushd $OCTOPI_MOUNT_PATH'
+++ pushd /home/theo/tmp/travis-test/src/workspace/mount
~/tmp/travis-test/src/workspace/mount ~/tmp/travis-test/src/workspace ~/tmp/travis-test/src
++++ previous_command='pushd $OCTOPI_MOUNT_PATH'
++++ this_command=fixLd
+++ fixLd
+++ sed -i 's@/usr/lib/arm-linux-gnueabihf/libcofi_rpi.so@\#/usr/lib/arm-linux-gnueabihf/libcofi_rpi.so@' etc/ld.so.preload
++++ previous_command=fixLd
++++ this_command='[ -n "$VARIANT_BASE" ]'
+++ '[' -n '' ']'
++++ previous_command='[ -n "$VARIANT_BASE" ]'
++++ this_command='execute_chroot_script $OCTOPI_SCRIPT_PATH $OCTOPI_CHROOT_SCRIPT_PATH'
+++ execute_chroot_script /home/theo/tmp/travis-test/src /home/theo/tmp/travis-test/src/chroot_script
+++ cp -vr --preserve=mode,timestamps /home/theo/tmp/travis-test/src/filesystem .
«/home/theo/tmp/travis-test/src/filesystem» -> «./filesystem»
«/home/theo/tmp/travis-test/src/filesystem/home» -> «./filesystem/home»
«/home/theo/tmp/travis-test/src/filesystem/home/pi» -> «./filesystem/home/pi»
«/home/theo/tmp/travis-test/src/filesystem/home/pi/scripts» -> «./filesystem/home/pi/scripts»
«/home/theo/tmp/travis-test/src/filesystem/home/pi/scripts/calibrate-rpi-display» -> «./filesystem/home/pi/scripts/calibrate-rpi-display»
«/home/theo/tmp/travis-test/src/filesystem/home/pi/scripts/enable-rpi-display» -> «./filesystem/home/pi/scripts/enable-rpi-display»
«/home/theo/tmp/travis-test/src/filesystem/home/pi/scripts/OctoPiPanel» -> «./filesystem/home/pi/scripts/OctoPiPanel»
«/home/theo/tmp/travis-test/src/filesystem/home/pi/scripts/enable-adafruit-pitft» -> «./filesystem/home/pi/scripts/enable-adafruit-pitft»
«/home/theo/tmp/travis-test/src/filesystem/home/pi/.octoprint» -> «./filesystem/home/pi/.octoprint»
«/home/theo/tmp/travis-test/src/filesystem/home/pi/.octoprint/config.yaml» -> «./filesystem/home/pi/.octoprint/config.yaml»
«/home/theo/tmp/travis-test/src/filesystem/home/root» -> «./filesystem/home/root»
«/home/theo/tmp/travis-test/src/filesystem/home/root/bin» -> «./filesystem/home/root/bin»
«/home/theo/tmp/travis-test/src/filesystem/home/root/bin/git» -> «./filesystem/home/root/bin/git»
«/home/theo/tmp/travis-test/src/filesystem/home/root/bin/webcamd» -> «./filesystem/home/root/bin/webcamd»
«/home/theo/tmp/travis-test/src/filesystem/boot» -> «./filesystem/boot»
«/home/theo/tmp/travis-test/src/filesystem/boot/cmdline-pi-tft.txt» -> «./filesystem/boot/cmdline-pi-tft.txt»
«/home/theo/tmp/travis-test/src/filesystem/boot/octopi-network.txt» -> «./filesystem/boot/octopi-network.txt»
«/home/theo/tmp/travis-test/src/filesystem/boot/octopi.txt» -> «./filesystem/boot/octopi.txt»
«/home/theo/tmp/travis-test/src/filesystem/root» -> «./filesystem/root»
«/home/theo/tmp/travis-test/src/filesystem/root/etc» -> «./filesystem/root/etc»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/haproxy» -> «./filesystem/root/etc/haproxy»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/haproxy/haproxy.cfg» -> «./filesystem/root/etc/haproxy/haproxy.cfg»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/octopi_version» -> «./filesystem/root/etc/octopi_version»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/rsyslog.d» -> «./filesystem/root/etc/rsyslog.d»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/rsyslog.d/49-haproxy.conf» -> «./filesystem/root/etc/rsyslog.d/49-haproxy.conf»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/logrotate.d» -> «./filesystem/root/etc/logrotate.d»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/logrotate.d/haproxy» -> «./filesystem/root/etc/logrotate.d/haproxy»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/logrotate.d/webcamd» -> «./filesystem/root/etc/logrotate.d/webcamd»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/default» -> «./filesystem/root/etc/default»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/default/haproxy» -> «./filesystem/root/etc/default/haproxy»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/default/webcamd» -> «./filesystem/root/etc/default/webcamd»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/default/octoprint» -> «./filesystem/root/etc/default/octoprint»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/init.d» -> «./filesystem/root/etc/init.d»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/init.d/haproxy» -> «./filesystem/root/etc/init.d/haproxy»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/init.d/webcamd» -> «./filesystem/root/etc/init.d/webcamd»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/init.d/gencert» -> «./filesystem/root/etc/init.d/gencert»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/init.d/octoprint» -> «./filesystem/root/etc/init.d/octoprint»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/udev» -> «./filesystem/root/etc/udev»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/udev/rules.d» -> «./filesystem/root/etc/udev/rules.d»
«/home/theo/tmp/travis-test/src/filesystem/root/etc/udev/rules.d/95-ads7846.rules» -> «./filesystem/root/etc/udev/rules.d/95-ads7846.rules»
++++ which qemu-arm-static
+++ cp /usr/bin/qemu-arm-static usr/bin
+++ cp /home/theo/tmp/travis-test/src/chroot_script chroot_script
+++ chmod 755 chroot_script
+++ cp /home/theo/tmp/travis-test/src/common.sh common.sh
+++ chmod 755 common.sh
+++ chroot . usr/bin/qemu-arm-static /bin/bash /chroot_script
+ echo

+ echo 'I AM HERE'
I AM HERE
+ echo /
/
+ apt-get remove -y --purge scratch squeak-plugins-scratch squeak-vm wolfram-engine python-minecraftpi minecraft-pi sonic-pi oracle-java8-jdk
Reading package lists...
Building dependency tree...
Reading state information...
The following packages were automatically installed and are no longer required:
  libcwiid1 libqscintilla2-8 libruby1.9.1 libsclang1 libscsynth1 libyaml-0-2
  ruby1.9.1 supercollider supercollider-common supercollider-server
Use 'apt-get autoremove' to remove them.
The following packages will be REMOVED:
  minecraft-pi* nuscratch* oracle-java8-jdk* python-minecraftpi*
  python3-minecraftpi* scratch* sonic-pi* squeak-plugins-scratch* squeak-vm*
  wolfram-engine*
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
	LANGUAGE = (unset),
	LC_ALL = (unset),
	LANG = "fr_FR.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
/usr/bin/locale: Cannot set LC_CTYPE to default locale: No such file or directory
/usr/bin/locale: Cannot set LC_MESSAGES to default locale: No such file or directory
/usr/bin/locale: Cannot set LC_ALL to default locale: No such file or directory
0 upgraded, 0 newly installed, 10 to remove and 0 not upgraded.
After this operation, 786 MB disk space will be freed.
Can not write log, openpty() failed (/dev/pts not mounted?)
(Reading database ... 77851 files and directories currently installed.)
Removing nuscratch ...
Removing 'diversion of /usr/bin/scratch to /usr/bin/scratch.old by nuscratch'
Purging configuration files for nuscratch ...
Removing wolfram-engine ...
Purging configuration files for wolfram-engine ...
Removing oracle-java8-jdk ...
Removing scratch ...
Purging configuration files for scratch ...
Removing sonic-pi ...
Purging configuration files for sonic-pi ...
Removing squeak-plugins-scratch ...
Removing squeak-vm ...
Purging configuration files for squeak-vm ...
Removing python-minecraftpi ...
Removing python3-minecraftpi ...
Removing minecraft-pi ...
Purging configuration files for minecraft-pi ...
Processing triggers for shared-mime-info ...
Processing triggers for man-db ...
/usr/bin/locale: Cannot set LC_CTYPE to default locale: No such file or directory
/usr/bin/locale: Cannot set LC_MESSAGES to default locale: No such file or directory
/usr/bin/locale: Cannot set LC_ALL to default locale: No such file or directory
Processing triggers for hicolor-icon-theme ...
Processing triggers for desktop-file-utils ...
Processing triggers for menu ...
Processing triggers for gnome-icon-theme ...
Processing triggers for mime-support ...
+ wget https://raw.githubusercontent.com/poppy-project/poppy-installer/master/poppy-configure.sh
--2015-07-08 09:13:39--  https://raw.githubusercontent.com/poppy-project/poppy-installer/master/poppy-configure.sh
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 23.235.43.133
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|23.235.43.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2002 (2.0K) [text/plain]
Saving to: `poppy-configure.sh'

     0K .                                                     100% 2.44M=0.001s

2015-07-08 09:13:45 (2.44 MB/s) - `poppy-configure.sh' saved [2002/2002]

+ sudo bash poppy-configure.sh rpi poppy-ergo-jr
sudo: unable to resolve host theo-flowers
Reading package lists...
Building dependency tree...
Reading state information...
avahi-daemon is already the newest version.
libnss-mdns is already the newest version.
libnss-mdns set to manually installed.
passwd is already the newest version.
The following packages were automatically installed and are no longer required:
  libcwiid1 libqscintilla2-8 libruby1.9.1 libsclang1 libscsynth1 libyaml-0-2
  ruby1.9.1 supercollider supercollider-common supercollider-server
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
[33mDefault Hostname change to [4mpoppy[0m.
Restarting Avahi mDNS/DNS-SD Daemon: avahi-daemonTimeout reached while wating for return value
Could not receive return value from daemon process.
 (warning).
[33mCreate a new user [4mpoppy[0m[33m with the default password [4mpoppy[0m.
--2015-07-08 09:14:10--  https://raw.githubusercontent.com/poppy-project/poppy-installer/master/poppy-logo
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.31.19.133
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.31.19.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1352 (1.3K) [text/plain]
Saving to: `/home/poppy/poppy-logo'

     0K .                                                     100% 3.60M=0s

2015-07-08 09:14:16 (3.60 MB/s) - `/home/poppy/poppy-logo' saved [1352/1352]

--2015-07-08 09:14:16--  https://raw.githubusercontent.com/poppy-project/poppy-installer/master/poppy-tools.sh
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 23.235.43.133
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|23.235.43.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1825 (1.8K) [text/plain]
Saving to: `/home/poppy/poppy-tools.sh'

     0K .                                                     100% 3.21M=0.001s

2015-07-08 09:14:22 (3.21 MB/s) - `/home/poppy/poppy-tools.sh' saved [1825/1825]

sudo: effective uid is not 0, is /usr/bin/sudo on a file system with the 'nosuid' option set or an NFS file system without root privileges?
[33mDownload sources[0m
/usr/local/bin/poppy-tools: line 25: svn: command not found
/bin/grep: /home/poppy/dev/poppy-tools/poppy-boards: No such file or directory
Unknown poppy-board:rpi 
poppy-tools install [board] [creature].
Supported boards list :
/bin/cat: /home/poppy/dev/poppy-tools/poppy-boards: No such file or directory
Supported creatures list :
/bin/cat: /home/poppy/dev/poppy-tools/poppy-creatures: No such file or directory
+++ rm chroot_script
+++ rm -rfv filesystem
«filesystem/root/etc/udev/rules.d/95-ads7846.rules» supprimé
répertoire supprimé : «filesystem/root/etc/udev/rules.d»
répertoire supprimé : «filesystem/root/etc/udev»
«filesystem/root/etc/rsyslog.d/49-haproxy.conf» supprimé
répertoire supprimé : «filesystem/root/etc/rsyslog.d»
«filesystem/root/etc/init.d/octoprint» supprimé
«filesystem/root/etc/init.d/webcamd» supprimé
«filesystem/root/etc/init.d/gencert» supprimé
«filesystem/root/etc/init.d/haproxy» supprimé
répertoire supprimé : «filesystem/root/etc/init.d»
«filesystem/root/etc/octopi_version» supprimé
«filesystem/root/etc/default/octoprint» supprimé
«filesystem/root/etc/default/webcamd» supprimé
«filesystem/root/etc/default/haproxy» supprimé
répertoire supprimé : «filesystem/root/etc/default»
«filesystem/root/etc/logrotate.d/webcamd» supprimé
«filesystem/root/etc/logrotate.d/haproxy» supprimé
répertoire supprimé : «filesystem/root/etc/logrotate.d»
«filesystem/root/etc/haproxy/haproxy.cfg» supprimé
répertoire supprimé : «filesystem/root/etc/haproxy»
répertoire supprimé : «filesystem/root/etc»
répertoire supprimé : «filesystem/root»
«filesystem/boot/cmdline-pi-tft.txt» supprimé
«filesystem/boot/octopi-network.txt» supprimé
«filesystem/boot/octopi.txt» supprimé
répertoire supprimé : «filesystem/boot»
«filesystem/home/pi/.octoprint/config.yaml» supprimé
répertoire supprimé : «filesystem/home/pi/.octoprint»
«filesystem/home/pi/scripts/enable-adafruit-pitft» supprimé
«filesystem/home/pi/scripts/enable-rpi-display» supprimé
«filesystem/home/pi/scripts/calibrate-rpi-display» supprimé
«filesystem/home/pi/scripts/OctoPiPanel» supprimé
répertoire supprimé : «filesystem/home/pi/scripts»
répertoire supprimé : «filesystem/home/pi»
«filesystem/home/root/bin/git» supprimé
«filesystem/home/root/bin/webcamd» supprimé
répertoire supprimé : «filesystem/home/root/bin»
répertoire supprimé : «filesystem/home/root»
répertoire supprimé : «filesystem/home»
répertoire supprimé : «filesystem»
++++ previous_command='execute_chroot_script $OCTOPI_SCRIPT_PATH $OCTOPI_CHROOT_SCRIPT_PATH'
++++ this_command='[ -n "$VARIANT_BASE" ]'
+++ '[' -n '' ']'
++++ previous_command='[ -n "$VARIANT_BASE" ]'
++++ this_command=restoreLd
+++ restoreLd
+++ sed -i 's@\#/usr/lib/arm-linux-gnueabihf/libcofi_rpi.so@/usr/lib/arm-linux-gnueabihf/libcofi_rpi.so@' etc/ld.so.preload
++++ previous_command=restoreLd
++++ this_command=popd
+++ popd
~/tmp/travis-test/src/workspace ~/tmp/travis-test/src
++++ previous_command=popd
++++ this_command='unmount_image $OCTOPI_MOUNT_PATH'
+++ unmount_image /home/theo/tmp/travis-test/src/workspace/mount
+++ mount_path=/home/theo/tmp/travis-test/src/workspace/mount
+++ sudo umount /home/theo/tmp/travis-test/src/workspace/mount/boot
+++ sudo umount /home/theo/tmp/travis-test/src/workspace/mount
++++ previous_command='unmount_image $OCTOPI_MOUNT_PATH'
++++ this_command='chmod 777 $OCTOPI_IMG_PATH'
+++ chmod 777 /home/theo/tmp/travis-test/src/workspace/Poppy_rpi.img
++++ previous_command='chmod 777 $OCTOPI_IMG_PATH'
++++ this_command=popd
+++ popd
~/tmp/travis-test/src
